{"version":3,"file":"colorCorrectionPostProcessBlock.js","sourceRoot":"","sources":["../../../../../../../dev/core/src/FrameGraph/Node/Blocks/PostProcesses/colorCorrectionPostProcessBlock.ts"],"names":[],"mappings":";AACA,OAAO,EAAE,aAAa,EAAE,MAAM,4BAA4B,CAAC;AAC3D,OAAO,EAAE,sBAAsB,EAA0B,MAAM,sCAAsC,CAAC;AACtG,OAAO,EAAE,6BAA6B,EAAE,MAAM,kDAAkD,CAAC;AACjG,OAAO,EAAE,mCAAmC,EAAE,MAAM,wBAAwB,CAAC;AAC7E,OAAO,EAAE,8BAA8B,EAAE,MAAM,0DAA0D,CAAC;AAE1G;;GAEG;AACH,MAAM,OAAO,8CAA+C,SAAQ,mCAAmC;IAGnG;;OAEG;IACH,IAAoB,IAAI;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC;IAChC,CAAC;IAED;;;;;;OAMG;IACH,YAAmB,IAAY,EAAE,UAAsB,EAAE,KAAY,EAAE,gBAAwB,EAAE;QAC7F,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;QAE/B,IAAI,CAAC,iCAAiC,GAAG,CAAC,aAAa,CAAC,CAAC;QAEzD,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAEvC,IAAI,CAAC,eAAe,GAAG,IAAI,6BAA6B,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,EAAE,aAAa,EAAE,IAAI,8BAA8B,CAAC,IAAI,EAAE,UAAU,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC,CAAC;IAC9K,CAAC;IAEO,WAAW,CAAC,aAAqB;QACrC,MAAM,kBAAkB,GAAG,IAAI,CAAC,eAAe,CAAC,kBAAkB,CAAC;QAEnE,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;QAE/B,IAAI,CAAC,eAAe,GAAG,IAAI,6BAA6B,CACpD,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,WAAW,EAChB,aAAa,EACb,IAAI,8BAA8B,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,aAAa,CAAC,CACvF,CAAC;QACF,IAAI,CAAC,eAAe,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;QAE7D,IAAI,CAAC,iCAAiC,GAAG,CAAC,aAAa,CAAC,CAAC;IAC7D,CAAC;IAED,0BAA0B;IAE1B,IAAW,aAAa;QACpB,OAAO,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,aAAa,CAAC;IAC1D,CAAC;IAED,IAAW,aAAa,CAAC,KAAa;QAClC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IAC5B,CAAC;IAED;;;OAGG;IACa,YAAY;QACxB,OAAO,gDAAgD,CAAC;IAC5D,CAAC;CACJ;AAfG;IADC,sBAAsB,CAAC,iBAAiB,0CAAiC,YAAY,CAAC;mFAGtF;AAeL,aAAa,CAAC,wDAAwD,EAAE,8CAA8C,CAAC,CAAC","sourcesContent":["import type { Scene, FrameGraph } from \"core/index\";\r\nimport { RegisterClass } from \"../../../../Misc/typeStore\";\r\nimport { editableInPropertyPage, PropertyTypeForEdition } from \"../../../../Decorators/nodeDecorator\";\r\nimport { FrameGraphColorCorrectionTask } from \"../../../Tasks/PostProcesses/colorCorrectionTask\";\r\nimport { NodeRenderGraphBasePostProcessBlock } from \"./basePostProcessBlock\";\r\nimport { ThinColorCorrectionPostProcess } from \"../../../../PostProcesses/thinColorCorrectionPostProcess\";\r\n\r\n/**\r\n * Block that implements the color correction post process\r\n */\r\nexport class NodeRenderGraphColorCorrectionPostProcessBlock extends NodeRenderGraphBasePostProcessBlock {\r\n    protected override _frameGraphTask: FrameGraphColorCorrectionTask;\r\n\r\n    /**\r\n     * Gets the frame graph task associated with this block\r\n     */\r\n    public override get task() {\r\n        return this._frameGraphTask;\r\n    }\r\n\r\n    /**\r\n     * Create a new NodeRenderGraphColorCorrectionPostProcessBlock\r\n     * @param name defines the block name\r\n     * @param frameGraph defines the hosting frame graph\r\n     * @param scene defines the hosting scene\r\n     * @param colorTableUrl defines the URL of the color table\r\n     */\r\n    public constructor(name: string, frameGraph: FrameGraph, scene: Scene, colorTableUrl: string = \"\") {\r\n        super(name, frameGraph, scene);\r\n\r\n        this._additionalConstructionParameters = [colorTableUrl];\r\n\r\n        this._finalizeInputOutputRegistering();\r\n\r\n        this._frameGraphTask = new FrameGraphColorCorrectionTask(this.name, frameGraph, colorTableUrl, new ThinColorCorrectionPostProcess(name, frameGraph.scene, colorTableUrl));\r\n    }\r\n\r\n    private _createTask(colorTableUrl: string) {\r\n        const sourceSamplingMode = this._frameGraphTask.sourceSamplingMode;\r\n\r\n        this._frameGraphTask.dispose();\r\n\r\n        this._frameGraphTask = new FrameGraphColorCorrectionTask(\r\n            this.name,\r\n            this._frameGraph,\r\n            colorTableUrl,\r\n            new ThinColorCorrectionPostProcess(this.name, this._frameGraph.scene, colorTableUrl)\r\n        );\r\n        this._frameGraphTask.sourceSamplingMode = sourceSamplingMode;\r\n\r\n        this._additionalConstructionParameters = [colorTableUrl];\r\n    }\r\n\r\n    /** The color table URL */\r\n    @editableInPropertyPage(\"Color Table URL\", PropertyTypeForEdition.String, \"PROPERTIES\")\r\n    public get colorTableUrl(): string {\r\n        return this._frameGraphTask.postProcess.colorTableUrl;\r\n    }\r\n\r\n    public set colorTableUrl(value: string) {\r\n        this._createTask(value);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public override getClassName() {\r\n        return \"NodeRenderGraphColorCorrectionPostProcessBlock\";\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.NodeRenderGraphColorCorrectionPostProcessBlock\", NodeRenderGraphColorCorrectionPostProcessBlock);\r\n"]}