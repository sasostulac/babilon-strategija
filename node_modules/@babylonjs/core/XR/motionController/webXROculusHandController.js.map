{"version":3,"file":"webXROculusHandController.js","sourceRoot":"","sources":["../../../../../dev/core/src/XR/motionController/webXROculusHandController.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,6BAA6B,EAAE,MAAM,iCAAiC,CAAC;AAGhF,OAAO,EAAE,4BAA4B,EAAE,MAAM,gCAAgC,CAAC;AAE9E;;GAEG;AACH,MAAM,OAAO,yBAA0B,SAAQ,6BAA6B;IAGxE;;;;;OAKG;IACH,YAAY,KAAY,EAAE,aAA6C,EAAE,UAAsC;QAC3G,uEAAuE;QACvE,KAAK,CAAC,KAAK,EAAE,iBAAiB,CAAC,UAAU,CAAC,EAAE,aAAa,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;QAV1E,cAAS,GAAG,aAAa,CAAC;IAWjC,CAAC;IAES,mBAAmB;QACzB,OAAO;YACH,QAAQ,EAAE,iBAAiB;YAC3B,IAAI,EAAE,4CAA4C;SACrD,CAAC;IACN,CAAC;IAES,2BAA2B;QACjC,OAAO,IAAI,CAAC;IAChB,CAAC;IAES,mBAAmB,CAAC,OAAuB;QACjD,QAAQ;IACZ,CAAC;IAES,YAAY,CAAC,MAAsB;QACzC,QAAQ;IACZ,CAAC;IAES,YAAY;QAClB,QAAQ;IACZ,CAAC;CACJ;AAED,wBAAwB;AACxB,4BAA4B,CAAC,kBAAkB,CAAC,aAAa,EAAE,CAAC,OAAsB,EAAE,KAAY,EAAE,EAAE;IACpG,OAAO,IAAI,yBAAyB,CAAC,KAAK,EAAO,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC;AAC1F,CAAC,CAAC,CAAC;AAEH,qHAAqH;AACrH,MAAM,iBAAiB,GAA+B;IAClD,IAAI,EAAE;QACF,iBAAiB,EAAE,qBAAqB;QACxC,UAAU,EAAE;YACR,gEAAgE;YAChE,qBAAqB,EAAE;gBACnB,IAAI,EAAE,SAAS;gBACf,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,qBAAqB;gBACnC,eAAe,EAAE,EAAE;aACtB;YACD,IAAI,EAAE;gBACF,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,MAAM;gBACpB,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,YAAY,EAAE;gBACV,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,YAAY;gBAC1B,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,aAAa,EAAE;gBACX,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,aAAa;gBAC3B,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,eAAe,EAAE;gBACb,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,eAAe;gBAC7B,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,gBAAgB,EAAE;gBACd,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,gBAAgB;gBAC9B,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,WAAW,EAAE;gBACT,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,WAAW;gBACzB,eAAe,EAAE,EAAE;aACtB;SACJ;QACD,cAAc,EAAE,aAAa;QAC7B,YAAY,EAAE,kBAAkB;QAChC,SAAS,EAAE,UAAU;KACxB;IACD,KAAK,EAAE;QACH,iBAAiB,EAAE,qBAAqB;QACxC,UAAU,EAAE;YACR,gEAAgE;YAChE,qBAAqB,EAAE;gBACnB,IAAI,EAAE,SAAS;gBACf,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,qBAAqB;gBACnC,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,YAAY,EAAE;gBACV,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,YAAY;gBAC1B,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,aAAa,EAAE;gBACX,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,aAAa;gBAC3B,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,eAAe,EAAE;gBACb,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,eAAe;gBAC7B,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,gBAAgB,EAAE;gBACd,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,gBAAgB;gBAC9B,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,WAAW,EAAE;gBACT,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,WAAW;gBACzB,eAAe,EAAE,EAAE;aACtB;SACJ;QACD,cAAc,EAAE,aAAa;QAC7B,YAAY,EAAE,mBAAmB;QACjC,SAAS,EAAE,WAAW;KACzB;IACD,IAAI,EAAE;QACF,iBAAiB,EAAE,qBAAqB;QACxC,UAAU,EAAE;YACR,gEAAgE;YAChE,qBAAqB,EAAE;gBACnB,IAAI,EAAE,SAAS;gBACf,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,qBAAqB;gBACnC,eAAe,EAAE,EAAE;aACtB;YACD,IAAI,EAAE;gBACF,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,MAAM;gBACpB,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,YAAY,EAAE;gBACV,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,YAAY;gBAC1B,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,aAAa,EAAE;gBACX,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,aAAa;gBAC3B,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,eAAe,EAAE;gBACb,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,eAAe;gBAC7B,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,gBAAgB,EAAE;gBACd,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,gBAAgB;gBAC9B,eAAe,EAAE,EAAE;aACtB;YACD,gEAAgE;YAChE,WAAW,EAAE;gBACT,IAAI,EAAE,QAAQ;gBACd,cAAc,EAAE;oBACZ,MAAM,EAAE,CAAC;iBACZ;gBACD,YAAY,EAAE,WAAW;gBACzB,eAAe,EAAE,EAAE;aACtB;SACJ;QACD,cAAc,EAAE,aAAa;QAC7B,YAAY,EAAE,kBAAkB;QAChC,SAAS,EAAE,UAAU;KACxB;CACJ,CAAC","sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport type { IMotionControllerLayoutMap, IMinimalMotionControllerObject, MotionControllerHandedness } from \"./webXRAbstractMotionController\";\r\nimport { WebXRAbstractMotionController } from \"./webXRAbstractMotionController\";\r\nimport type { Scene } from \"../../scene\";\r\nimport type { AbstractMesh } from \"../../Meshes/abstractMesh\";\r\nimport { WebXRMotionControllerManager } from \"./webXRMotionControllerManager\";\r\n\r\n/**\r\n * Oculus hand controller class that supports microgestures\r\n */\r\nexport class WebXROculusHandController extends WebXRAbstractMotionController {\r\n    public profileId = \"oculus-hand\";\r\n\r\n    /**\r\n     * Create a new hand controller object, without loading a controller model\r\n     * @param scene the scene to use to create this controller\r\n     * @param gamepadObject the corresponding gamepad object\r\n     * @param handedness the handedness of the controller\r\n     */\r\n    constructor(scene: Scene, gamepadObject: IMinimalMotionControllerObject, handedness: MotionControllerHandedness) {\r\n        // Don't load the controller model - for now, hands have no real model.\r\n        super(scene, OculusHandProfile[handedness], gamepadObject, handedness, true);\r\n    }\r\n\r\n    protected _getFilenameAndPath(): { filename: string; path: string } {\r\n        return {\r\n            filename: \"generic.babylon\",\r\n            path: \"https://controllers.babylonjs.com/generic/\",\r\n        };\r\n    }\r\n\r\n    protected _getModelLoadingConstraints(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected _processLoadedModel(_meshes: AbstractMesh[]): void {\r\n        // no-op\r\n    }\r\n\r\n    protected _setRootMesh(meshes: AbstractMesh[]): void {\r\n        // no-op\r\n    }\r\n\r\n    protected _updateModel(): void {\r\n        // no-op\r\n    }\r\n}\r\n\r\n// register the profiles\r\nWebXRMotionControllerManager.RegisterController(\"oculus-hand\", (xrInput: XRInputSource, scene: Scene) => {\r\n    return new WebXROculusHandController(scene, <any>xrInput.gamepad, xrInput.handedness);\r\n});\r\n\r\n// https://github.com/immersive-web/webxr-input-profiles/blob/main/packages/registry/profiles/oculus/oculus-hand.json\r\nconst OculusHandProfile: IMotionControllerLayoutMap = {\r\n    left: {\r\n        selectComponentId: \"xr-standard-trigger\",\r\n        components: {\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"xr-standard-trigger\": {\r\n                type: \"trigger\",\r\n                gamepadIndices: {\r\n                    button: 0,\r\n                },\r\n                rootNodeName: \"xr-standard-trigger\",\r\n                visualResponses: {},\r\n            },\r\n            menu: {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 4,\r\n                },\r\n                rootNodeName: \"menu\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"swipe-left\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 5,\r\n                },\r\n                rootNodeName: \"swipe-left\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"swipe-right\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 6,\r\n                },\r\n                rootNodeName: \"swipe-right\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"swipe-forward\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 7,\r\n                },\r\n                rootNodeName: \"swipe-forward\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"swipe-backward\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 8,\r\n                },\r\n                rootNodeName: \"swipe-backward\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"tap-thumb\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 9,\r\n                },\r\n                rootNodeName: \"tap-thumb\",\r\n                visualResponses: {},\r\n            },\r\n        },\r\n        gamepadMapping: \"xr-standard\",\r\n        rootNodeName: \"oculus-hand-left\",\r\n        assetPath: \"left.glb\",\r\n    },\r\n    right: {\r\n        selectComponentId: \"xr-standard-trigger\",\r\n        components: {\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"xr-standard-trigger\": {\r\n                type: \"trigger\",\r\n                gamepadIndices: {\r\n                    button: 0,\r\n                },\r\n                rootNodeName: \"xr-standard-trigger\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"swipe-left\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 5,\r\n                },\r\n                rootNodeName: \"swipe-left\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"swipe-right\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 6,\r\n                },\r\n                rootNodeName: \"swipe-right\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"swipe-forward\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 7,\r\n                },\r\n                rootNodeName: \"swipe-forward\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"swipe-backward\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 8,\r\n                },\r\n                rootNodeName: \"swipe-backward\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"tap-thumb\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 9,\r\n                },\r\n                rootNodeName: \"tap-thumb\",\r\n                visualResponses: {},\r\n            },\r\n        },\r\n        gamepadMapping: \"xr-standard\",\r\n        rootNodeName: \"oculus-hand-right\",\r\n        assetPath: \"right.glb\",\r\n    },\r\n    none: {\r\n        selectComponentId: \"xr-standard-trigger\",\r\n        components: {\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"xr-standard-trigger\": {\r\n                type: \"trigger\",\r\n                gamepadIndices: {\r\n                    button: 0,\r\n                },\r\n                rootNodeName: \"xr-standard-trigger\",\r\n                visualResponses: {},\r\n            },\r\n            menu: {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 4,\r\n                },\r\n                rootNodeName: \"menu\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"swipe-left\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 5,\r\n                },\r\n                rootNodeName: \"swipe-left\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"swipe-right\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 6,\r\n                },\r\n                rootNodeName: \"swipe-right\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"swipe-forward\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 7,\r\n                },\r\n                rootNodeName: \"swipe-forward\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"swipe-backward\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 8,\r\n                },\r\n                rootNodeName: \"swipe-backward\",\r\n                visualResponses: {},\r\n            },\r\n            // eslint-disable-next-line @typescript-eslint/naming-convention\r\n            \"tap-thumb\": {\r\n                type: \"button\",\r\n                gamepadIndices: {\r\n                    button: 9,\r\n                },\r\n                rootNodeName: \"tap-thumb\",\r\n                visualResponses: {},\r\n            },\r\n        },\r\n        gamepadMapping: \"xr-standard\",\r\n        rootNodeName: \"oculus-hand-none\",\r\n        assetPath: \"none.glb\",\r\n    },\r\n};\r\n"]}